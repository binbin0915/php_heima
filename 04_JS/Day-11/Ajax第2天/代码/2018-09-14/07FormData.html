<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

<form name="myform">
    用户名：<input type="text" name="username"><br>
    密　码：<input type="password" name="pwd"><br>
    性　别：<input type="radio" name="sex" value="男" checked>男
    <input type="radio" name="sex" value="女" >女<br>
    爱　好：<input type="checkbox" name="hobby[]" value="吃饭">吃饭
    <input type="checkbox" name="hobby[]" value="睡觉">睡觉
    <input type="checkbox" name="hobby[]" value="打豆豆">打豆豆<br>
    图　片：<input type="file" name="pic"><br>
    地　址：<select name="address">
    <option value="北京">北京</option>
    <option value="天津">天津</option>
    <option value="上海">上海</option>
</select><br>
    简　介：<textarea name="introduce" cols="45" rows="3"></textarea><br>
    <input type="button" value="提交" id="btn">
</form>

<progress style="display: none;"></progress>

<script>
    //找button按钮，绑定单击事件
    document.getElementById('btn').onclick = function () {
        /***** 收集表单数据 *****/
        //var username = document.myform.username.value;
        //var pwd = document.myform.pwd.value;
        //....
        var form = document.myform;
        var fd = new FormData(form); //fd 就是收集到所有的数据
        /***** 发送Ajax请求 *****/
        var xhr = new XMLHttpRequest();
        /********** 制作进度条开始 **********/
        //console.log(xhr);
        //console.log(xhr.upload); // 发现有一个onprogress的事件
        var pro = document.getElementsByTagName('progress')[0];
        //当上传进度发生变化的时候，会触发下面的事件
        xhr.upload.onprogress = function (evt) {
            //console.log(evt);
            pro.setAttribute('max', evt.total);
            pro.setAttribute('value', evt.loaded);
            pro.style.display = 'block';
        };
        /********** 制作进度条结束 **********/
        xhr.onreadystatechange = function () {

        };
        xhr.open('post', '07FormData.php');
        xhr.send(fd);
    };
</script>


</body>
</html>