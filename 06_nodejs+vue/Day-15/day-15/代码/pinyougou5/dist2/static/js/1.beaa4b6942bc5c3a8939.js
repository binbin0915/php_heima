webpackJsonp([1],{"5BZo":function(e,t){},EBEP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={data:function(){return{roleId:"",roleList:[],rolesData:{},editUserShow:!1,userEditData:{id:"",username:"",email:"",mobile:""},addUserShow:!1,userAddData:{username:"",password:"",email:"",mobile:""},rolesShow:!1,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}]},searchData:"",value2:!0,tableData:[],total:0,sizepage:20,page:1}},methods:{pageChange:function(e){this.page=e,this.getUserList()},sizeChange:function(e){this.sizepage=e,this.getUserList()},getUserList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""==t)var a="users?pagenum="+this.page+"&pagesize="+this.sizepage;else a="users?pagenum=1&pagesize=20&query="+t;this.$myHttp({url:a,method:"get"}).then(function(t){var a=t.data,s=a.data;200==a.meta.status&&(e.total=s.total,e.tableData=s.users)})},searchGet:function(){this.getUserList(this.searchData)},userShow:function(){this.addUserShow=!0},addUserPost:function(){var e=this;this.$myHttp({url:"users",method:"post",data:this.userAddData}).then(function(t){var a=t.data;a.data;201==a.meta.status&&(e.$message({message:"添加用户成功",type:"success"}),e.addUserShow=!1,e.getUserList())})},mgStateChange:function(e){var t=this;this.$myHttp({url:"users/"+e.row.id+"/state/"+e.row.mg_state,method:"put",headers:{Authorization:window.localStorage.getItem("token")}}).then(function(a){var s=a.data;s.data;200==s.meta.status?t.$message({message:"修改状态成功",type:"success"}):t.tableData[e.$index].mg_state=!e.row.mg_state})},deleteUser:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$myHttp({url:"users/"+e,method:"delete"}).then(function(e){var a=e.data;a.data;200==a.meta.status&&(t.getUserList(),t.$message({message:"删除成功",type:"success"}))})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},editUserisShow:function(e){this.userEditData=e.row,this.editUserShow=!0},editUserPut:function(){var e=this,t=this.userEditData.id,a=this.userEditData.email,s=this.userEditData.mobile;this.$myHttp({url:"users/"+t,method:"put",data:{email:a,mobile:s}}).then(function(t){var a=t.data;a.data;200==a.meta.status?e.$message({message:"修改成功",type:"success"}):e.$message.error("修改失败"),e.editUserShow=!1,e.getUserList()})},quxiaoxiugai:function(){this.editUserShow=!1,this.getUserList()},rolesShowClick:function(e){var t=this;this.$myHttp({url:"roles",method:"get"}).then(function(e){console.log(e),t.roleList=e.data.data}),this.rolesData=e.row,this.rolesShow=!0},rolePut:function(){var e=this;this.$myHttp({url:"users/"+this.rolesData.id+"/role",method:"put",data:{rid:this.roleId}}).then(function(t){var a=t.data;a.data;200==a.meta.status&&(e.$message({message:"修改角色成功",type:"success"}),e.rolesShow=!1)})}},mounted:function(){this.getUserList()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("用户管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("用户列表")])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.searchData,callback:function(t){e.searchData=t},expression:"searchData"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return t.stopPropagation(),e.searchGet(t)}},slot:"append"})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.userShow(t)}}},[e._v("添加用户")])],1),e._v(" "),a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{property:"username",label:"姓名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{property:"email",label:"邮箱",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{property:"mobile",label:"电话"}}),e._v(" "),a("el-table-column",{attrs:{property:"",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){e.mgStateChange(t)}},model:{value:t.row.mg_state,callback:function(a){e.$set(t.row,"mg_state",a)},expression:"scope.row.mg_state"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:"",icon:"el-icon-edit"},on:{click:function(a){a.stopPropagation(),e.editUserisShow(t)}}}),e._v(" "),a("el-button",{attrs:{type:"warning",size:"mini",plain:"",icon:"el-icon-check"},on:{click:function(a){e.rolesShowClick(t)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",plain:"",icon:"el-icon-delete"},on:{click:function(a){e.deleteUser(t.row.id)}}})]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"page-sizes":[1,2,3,4,20],"page-size":20,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.sizeChange,"current-change":e.pageChange}}),e._v(" "),a("el-dialog",{attrs:{title:"添加用户",visible:e.addUserShow},on:{"update:visible":function(t){e.addUserShow=t}}},[a("el-form",{attrs:{model:e.userAddData,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名","label-width":"200px",prop:"username"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.userAddData.username,callback:function(t){e.$set(e.userAddData,"username",t)},expression:"userAddData.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":"200px",prop:"password"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.userAddData.password,callback:function(t){e.$set(e.userAddData,"password",t)},expression:"userAddData.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱","label-width":"200px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.userAddData.email,callback:function(t){e.$set(e.userAddData,"email",t)},expression:"userAddData.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话","label-width":"200px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.userAddData.mobile,callback:function(t){e.$set(e.userAddData,"mobile",t)},expression:"userAddData.mobile"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addUserShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addUserPost}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改用户",visible:e.editUserShow},on:{"update:visible":function(t){e.editUserShow=t}}},[a("el-form",{attrs:{model:e.userEditData,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名","label-width":"200px",prop:"username"}},[a("el-input",{attrs:{disabled:!0,autocomplete:"off"},model:{value:e.userEditData.username,callback:function(t){e.$set(e.userEditData,"username",t)},expression:"userEditData.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱","label-width":"200px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.userEditData.email,callback:function(t){e.$set(e.userEditData,"email",t)},expression:"userEditData.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话","label-width":"200px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.userEditData.mobile,callback:function(t){e.$set(e.userEditData,"mobile",t)},expression:"userEditData.mobile"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.quxiaoxiugai}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editUserPut}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改用户",visible:e.rolesShow},on:{"update:visible":function(t){e.rolesShow=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"用户名","label-width":"200px"}},[a("span",[e._v(e._s(e.rolesData.username))])]),e._v(" "),a("el-form-item",{attrs:{label:"角色","label-width":"200px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.roleId,callback:function(t){e.roleId=t},expression:"roleId"}},e._l(e.roleList,function(e){return a("el-option",{key:e.roleName,attrs:{label:e.roleName,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.rolesShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.rolePut}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,r,!1,function(e){a("5BZo")},null,null);t.default=o.exports}});
//# sourceMappingURL=1.beaa4b6942bc5c3a8939.js.map