webpackJsonp([2],{"5BNl":function(t,e){},"5BZo":function(t,e){},"8wtT":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=a("VU/8")({name:"App"},r,!1,function(t){a("i7XJ")},null,null).exports,l=a("/ocq"),i={data:function(){return{menusList:[]}},mounted:function(){this.getMenusList(),window.localStorage.getItem("token")||(this.$message.error("请登录"),this.$router.push({name:"login"}))},methods:{getMenusList:function(){var t=this;this.$myHttp({url:"menus",method:"get"}).then(function(e){var a=e.data,s=a.data,r=a.meta;console.log(s,r),t.menusList=s})},logOut:function(){window.localStorage.clear("token"),this.$router.push({name:"login"})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"height100"},[a("el-header",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[a("img",{attrs:{src:"/static/logo.png",alt:""}})])]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("h2",[t._v("电商后台管理系统")])])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-button",{attrs:{type:"warning"},on:{click:function(e){return e.stopPropagation(),t.logOut(e)}}},[t._v("退出")])],1)])],1),t._v(" "),a("el-container",[a("el-aside",{attrs:{width:"200px"}},[a("el-col",{attrs:{span:24}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:!0,"default-active":"2"}},t._l(t.menusList,function(e){return a("el-submenu",{key:e.id,attrs:{index:e.id}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),t._v(" "),a("span",[t._v(t._s(e.authName))])]),t._v(" "),a("el-menu-item-group",t._l(e.children,function(e){return a("el-menu-item",{key:e.id,attrs:{index:e.path}},[a("i",{staticClass:"el-icon-menu"}),t._v("\n            "+t._s(e.authName)+"\n          ")])}))],2)}))],1)],1),t._v(" "),a("el-main",[a("router-view")],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(i,n,!1,function(t){a("8wtT")},null,null).exports,c={data:function(){return{form:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}]}}},methods:{loginClick:function(){var t=this;this.$refs.form.validate(function(t){}),this.$myHttp.post("login",this.form).then(function(e){200==e.data.meta.status&&(window.localStorage.setItem("token",e.data.data.token),t.$message({message:"恭喜登录成功",type:"success"}),t.$router.push({name:"home"}))})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-wrap"},[a("el-form",{ref:"form",staticClass:"demo-ruleForm login-from",attrs:{"status-icon":"",rules:t.rules,model:t.form,"label-width":"100px"}},[a("h2",[t._v("用户登录")]),t._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),a("el-form-item",[a("el-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:t.loginClick}},[t._v("登陆")])],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(c,d,!1,function(t){a("5BNl")},null,null).exports,p={data:function(){return{roleId:"",roleList:[],rolesData:{},editUserShow:!1,userEditData:{id:"",username:"",email:"",mobile:""},addUserShow:!1,userAddData:{username:"",password:"",email:"",mobile:""},rolesShow:!1,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:8,message:"长度在 3 到 8 个字符",trigger:"blur"}]},searchData:"",value2:!0,tableData:[],total:0,sizepage:20,page:1}},methods:{pageChange:function(t){this.page=t,this.getUserList()},sizeChange:function(t){this.sizepage=t,this.getUserList()},getUserList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""==e)var a="users?pagenum="+this.page+"&pagesize="+this.sizepage;else a="users?pagenum=1&pagesize=20&query="+e;this.$myHttp({url:a,method:"get"}).then(function(e){var a=e.data,s=a.data;200==a.meta.status&&(t.total=s.total,t.tableData=s.users)})},searchGet:function(){this.getUserList(this.searchData)},userShow:function(){this.addUserShow=!0},addUserPost:function(){var t=this;this.$myHttp({url:"users",method:"post",data:this.userAddData}).then(function(e){var a=e.data;a.data;201==a.meta.status&&(t.$message({message:"添加用户成功",type:"success"}),t.addUserShow=!1,t.getUserList())})},mgStateChange:function(t){var e=this;this.$myHttp({url:"users/"+t.row.id+"/state/"+t.row.mg_state,method:"put",headers:{Authorization:window.localStorage.getItem("token")}}).then(function(a){var s=a.data;s.data;200==s.meta.status?e.$message({message:"修改状态成功",type:"success"}):e.tableData[t.$index].mg_state=!t.row.mg_state})},deleteUser:function(t){var e=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$myHttp({url:"users/"+t,method:"delete"}).then(function(t){var a=t.data;a.data;200==a.meta.status&&(e.getUserList(),e.$message({message:"删除成功",type:"success"}))})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},editUserisShow:function(t){this.userEditData=t.row,this.editUserShow=!0},editUserPut:function(){var t=this,e=this.userEditData.id,a=this.userEditData.email,s=this.userEditData.mobile;this.$myHttp({url:"users/"+e,method:"put",data:{email:a,mobile:s}}).then(function(e){var a=e.data;a.data;200==a.meta.status?t.$message({message:"修改成功",type:"success"}):t.$message.error("修改失败"),t.editUserShow=!1,t.getUserList()})},quxiaoxiugai:function(){this.editUserShow=!1,this.getUserList()},rolesShowClick:function(t){var e=this;this.$myHttp({url:"roles",method:"get"}).then(function(t){console.log(t),e.roleList=t.data.data}),this.rolesData=t.row,this.rolesShow=!0},rolePut:function(){var t=this;this.$myHttp({url:"users/"+this.rolesData.id+"/role",method:"put",data:{rid:this.roleId}}).then(function(e){var a=e.data;a.data;200==a.meta.status&&(t.$message({message:"修改角色成功",type:"success"}),t.rolesShow=!1)})}},mounted:function(){this.getUserList()}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("用户管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("用户列表")])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:t.searchData,callback:function(e){t.searchData=e},expression:"searchData"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return e.stopPropagation(),t.searchGet(e)}},slot:"append"})],1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.userShow(e)}}},[t._v("添加用户")])],1),t._v(" "),a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{property:"username",label:"姓名",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{property:"email",label:"邮箱",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{property:"mobile",label:"电话"}}),t._v(" "),a("el-table-column",{attrs:{property:"",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){t.mgStateChange(e)}},model:{value:e.row.mg_state,callback:function(a){t.$set(e.row,"mg_state",a)},expression:"scope.row.mg_state"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:"",icon:"el-icon-edit"},on:{click:function(a){a.stopPropagation(),t.editUserisShow(e)}}}),t._v(" "),a("el-button",{attrs:{type:"warning",size:"mini",plain:"",icon:"el-icon-check"},on:{click:function(a){t.rolesShowClick(e)}}}),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",plain:"",icon:"el-icon-delete"},on:{click:function(a){t.deleteUser(e.row.id)}}})]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"page-sizes":[1,2,3,4,20],"page-size":20,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.sizeChange,"current-change":t.pageChange}}),t._v(" "),a("el-dialog",{attrs:{title:"添加用户",visible:t.addUserShow},on:{"update:visible":function(e){t.addUserShow=e}}},[a("el-form",{attrs:{model:t.userAddData,rules:t.rules}},[a("el-form-item",{attrs:{label:"用户名","label-width":"200px",prop:"username"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.userAddData.username,callback:function(e){t.$set(t.userAddData,"username",e)},expression:"userAddData.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":"200px",prop:"password"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.userAddData.password,callback:function(e){t.$set(t.userAddData,"password",e)},expression:"userAddData.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"邮箱","label-width":"200px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.userAddData.email,callback:function(e){t.$set(t.userAddData,"email",e)},expression:"userAddData.email"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"电话","label-width":"200px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.userAddData.mobile,callback:function(e){t.$set(t.userAddData,"mobile",e)},expression:"userAddData.mobile"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addUserShow=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addUserPost}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改用户",visible:t.editUserShow},on:{"update:visible":function(e){t.editUserShow=e}}},[a("el-form",{attrs:{model:t.userEditData,rules:t.rules}},[a("el-form-item",{attrs:{label:"用户名","label-width":"200px",prop:"username"}},[a("el-input",{attrs:{disabled:!0,autocomplete:"off"},model:{value:t.userEditData.username,callback:function(e){t.$set(t.userEditData,"username",e)},expression:"userEditData.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"邮箱","label-width":"200px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.userEditData.email,callback:function(e){t.$set(t.userEditData,"email",e)},expression:"userEditData.email"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"电话","label-width":"200px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.userEditData.mobile,callback:function(e){t.$set(t.userEditData,"mobile",e)},expression:"userEditData.mobile"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.quxiaoxiugai}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editUserPut}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改用户",visible:t.rolesShow},on:{"update:visible":function(e){t.rolesShow=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"用户名","label-width":"200px"}},[a("span",[t._v(t._s(t.rolesData.username))])]),t._v(" "),a("el-form-item",{attrs:{label:"角色","label-width":"200px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.roleId,callback:function(e){t.roleId=e},expression:"roleId"}},t._l(t.roleList,function(t){return a("el-option",{key:t.roleName,attrs:{label:t.roleName,value:t.id}})}))],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.rolesShow=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.rolePut}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,h,!1,function(t){a("5BZo")},null,null).exports,g={data:function(){return{tableData:[]}},methods:{getRightsList:function(){var t=this;this.$myHttp({url:"rights/list",method:"get"}).then(function(e){var a=e.data,s=a.data,r=a.meta;200==r.status&&(t.tableData=s),console.log(s,r)})}},mounted:function(){this.getRightsList()}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"authName",label:"权限名称",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{property:"path",label:"路径",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{property:"level",label:"层级"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.level?a("span",[t._v("一级")]):t._e(),t._v(" "),1==e.row.level?a("span",[t._v("二级")]):t._e(),t._v(" "),2==e.row.level?a("span",[t._v("三级")]):t._e()]}}])})],1)],1)},staticRenderFns:[]};var b=a("VU/8")(g,v,!1,function(t){a("zhVq")},null,null).exports;s.default.use(l.a);var w=new l.a({routes:[{path:"/",name:"home",component:u,children:[{path:"/users",name:"users",component:f},{path:"/rights",name:"rights",component:b},{path:"/roles",name:"roles",component:function(){return a.e(0).then(a.bind(null,"blep"))}}]},{path:"/login",name:"login",component:m}]});w.beforeEach(function(t,e,a){"login"==t.name?a():localStorage.getItem("token")?a():a({name:"login"})});var _=w,y=a("mtWM"),D=a.n(y),k={install:function(t){var e=D.a.create({baseURL:"http://localhost:8888/api/private/v1/",headers:{Authorization:window.localStorage.getItem("token")}});t.prototype.$myHttp=e}},x=k,$=a("zL8q"),S=a.n($);a("tvR6"),a("VaBq");s.default.use(x),s.default.use(S.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:_,components:{App:o},template:"<App/>"})},VaBq:function(t,e){},i7XJ:function(t,e){},tvR6:function(t,e){},zhVq:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8bceffcd35a4e124431c.js.map